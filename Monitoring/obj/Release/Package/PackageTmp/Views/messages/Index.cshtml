@model IEnumerable<Monitoring.Models.message>

@{
    ViewBag.Title = "Сообщения";
}

<div class="container" style="margin-top: 50px;">

    <div class=""></div>

    <div class="row col-12">
        <aside class="col-3 aside_left">
            <h4>Сообщения</h4>
            <ul class="navbar-nav mr-auto left_nav">
                <li class="nav-item @if (Request.QueryString["type"] == null || Convert.ToInt32(Request.QueryString["type"]) == 1) { Write("active"); } ">
                    <a class="nav-link" href="@Url.Action("Index","Messages",new { type=1 })">Входящие</a>
                </li>
                <li class="nav-item @if (Request.QueryString["type"] != null && Convert.ToInt32(Request.QueryString["type"]) == 2) { Write("active"); } ">
                    <a class="nav-link" href="@Url.Action("Index","Messages",new { type=2 })">Исходящие</a>
                </li>
            </ul>


        </aside>

        <div class="col-md-9 messages">

            @foreach (var item in Model)
            {
                <div class="message @if (item.state_id==1) { Write("not_read"); } round-div">
                    <div>
                        <p class="message_title">@Html.DisplayFor(modelItem => item.title)</p>
                        <p class="message_small_text">@Html.DisplayFor(modelItem => item.text)</p>
                        <p class="message_small_date">@Html.DisplayFor(modelItem => item.date_create)</p>
                    </div>
                    <div class="row button-cover d-flex justify-content-end">
                        <a href="@Url.Action("Details", "Messages", new {id=item.id })" class="btn btn-primary a_messaage">Просмотреть</a>
                    </div>
                </div>
            }

            @if (Model.Count() == 0)
            {
                if (Convert.ToInt32(Request.QueryString["type"]) == 1 || Convert.ToInt32(Request.QueryString["type"]) != 2)
                {
                    <p>Вы не получили ни одного сообщения</p>
                }
                else
                {
                    <p>Вы не отправили ни одного сообщения</p>
                }
            }

        </div>
    </div>
</div>



